<p id="notice"><%= notice %></p>

<div class="row">

    <h3>Roommates</h3>
      <hr>

    <%@unit.users.each do |roommate| %>
    <% if state(@unit,roommate) === "approved" %>
    <div class="col-sm-6">

    <div class="panel-primary">
      <div class="panel-heading">
        <%= roommate.name %>
      </div>

      <div class="panel-body">
        <div class="col-xs-3">
          <img id="user-photo" class="img-responsive img-circle" src= <%=roommate.photo%> >
        </div>
        <div class="col-xs-9" id="user-info">
          <p>
            <strong>Email:</strong>
            <%= roommate.email %>
          </p>

          <p>
            <strong>Phone:</strong>
            <%= roommate.phone %>
          </p>

          <p>
            <strong>Chores:</strong>
            <% roommate.chores.each do |chore| %>
              <%= chore.title %>
            <% end %>
          </p>
          <% if current_user == @user %>
          <p><%= link_to 'Edit', edit_user_path(@user) %></p>
          <% end %>
        </div>
      </div>
    </div>

</div>
  <% end %>
  <% end %>

</div>

<div class="row">
  <%=link_to "Chores", unit_chores_path(@unit), html_options = {class: "btn btn-warning btn-block"}%>
<div id="pending" class="col-sm-6">
  <hr>
  <h3>Pending Roommates</h3>
  <hr>

  <ul class="list-group">
    <% @unit.users.each do |roommate| %>
    <% if state(@unit,roommate) === "pending" %>
    <li class="list-group-item">
      <%= roommate.name %>
      <span class="pull-right">
        <%= link_to "Approve", state_path(@unit, roommate, state: "approved"), html_options={method: :patch} %>
        | <%= link_to "Decline", state_path(@unit, roommate, state: "blocked"), html_options={method: :patch} %>
      </span>
    </li>

    <% end %>
    <% end %>

  </ul>
</div>

</div>

<%= link_to 'Edit', edit_unit_path(@unit) %> |
<%= link_to 'Back', units_path %> |
<%= link_to 'Delete This Unit', unit_path, method: :delete %>

<nav class="navbar navbar-inverse">
  <div class="text-center">
    <p>
      <%= @unit.name %> | <%= @unit.address %>
    </p>

    <p>
      <strong>Landlord Contact:</strong>
      <%= @unit.landlord_name %> |
      <%= @unit.landlord_phone %> |
      <%= @unit.landlord_email %>
    </p>
  </div>
</nav>
